#! /usr/bin/env python

# Get usage information from Internode's web page.  

# ------------------------------------------------------------------------------

import sys
import beautifulsoup as bsoup

it __name__ == "__main__":
# Get arguements
    try:
        isp_index = sys.argv[1]
    except IndexError:
        sys.exit("Usage: get-isp-quota isp_index")

# Pull username & password from config file

# config_file="/etc/cacti/ISP_Quota.conf"

# user-agent="Cacti ISP Quota/1.0.1"

# Internode:
#
#   Get service ID
#     https://username:password@customer-webtools-api.internode.on.net/api/v1.5/
#     <?xml version="1.0" encoding="UTF-8"?>
#     <internode>
#       <api>
#         <services count="1">
#           <service type="Personal_ADSL" href="/api/v1.5/644383">
#             644383
#           </service>
#         </services>
#       </api>
#     </internode>

#   Get usage for service ID
#     https://username:password@customer-webtools-api.internode.on.net/api/v1.5/<service_id>/usage
#     <?xml version="1.0" encoding="UTF-8"?>
#     <internode>
#       <api>
#         <service type="Personal_ADSL" request="usage">
#           644383
#         </service>
#         <traffic name="metered" unit="bytes">
#           24240944228
#         </traffic>
#         <traffic name="unmetered" unit="bytes">
#           24240944228
#         </traffic>
#         <traffic name="total" rollover="2009-08-17" plan-interval="Quarterly" quota="25000000000" unit="bytes">
#           24240944228
#         </traffic>
#       </api>
#     </internode>
#   Now that we have the rollover date, we can calculate a target usage from %through the month x quota and return that, too.  Plot that as a line on the graph.

# echo "usage:$usage limit:$limit unmetered:$unmetered uploads:$uploads"

# ------------------------------------------------------------------------------
